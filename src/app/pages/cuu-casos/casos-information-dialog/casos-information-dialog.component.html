<div class="container mt-4">
  <div class="card shadow-sm">
    <div class="card-header text-black text-center">
      <h2 class="mb-0">Detalles del Caso</h2>
    </div>
    <div class="card-body" *ngIf="caso">
      <!-- Lista colapsable -->
      <div class="collapse-container">
        <ul
          class="list-group list-group-flush mb-4"
          [class.collapsed]="selectedSection"
          [class.expanded]="!selectedSection"
        >
          <li class="list-group-item always-show">
            <strong>Cliente:</strong> {{ caso.cliente.apellido }}
            {{ caso.cliente.nombre }}
          </li>
          <li class="list-group-item always-show">
            <strong>Estado:</strong> {{ caso.estado }}
          </li>

          <!-- Elementos que se colapsan -->
          <div class="collapse-content" [class.show]="selectedSection">
            <li class="list-group-item"><strong>ID:</strong> {{ caso.id }}</li>
            <li class="list-group-item">
              <strong>Especialidad:</strong> {{ caso.especialidad.nombre }}
            </li>
            <li class="list-group-item">
              <strong>Fecha de Inicio:</strong>
              {{ caso.fecha_inicio | date : "dd/MM/yyyy" }}
            </li>
            <li class="list-group-item">
              <strong>Descripción:</strong> {{ caso.descripcion }}
            </li>
            <li class="list-group-item">
              <strong>Última Actualización:</strong>
              {{ caso.fecha_estado | date : "dd/MM/yyyy" }}
            </li>
          </div>
        </ul>
      </div>

      <div class="d-flex flex-wrap gap-2 justify-content-center">
        <button class="btn btn-outline-primary" (click)="showNotas()">
          Ver Notas
        </button>
        <button class="btn btn-outline-primary" (click)="showAbogados()">
          Ver Abogados
        </button>
        <button class="btn btn-outline-primary" (click)="showDocumentos()">
          Ver Documentos
        </button>
        <button class="btn btn-outline-primary" (click)="showRecordatorios()">
          Ver Recordatorios
        </button>
        <button class="btn btn-outline-primary" (click)="showComentarios()">
          Ver Comentarios
        </button>
      </div>
    </div>
  </div>
</div>

<div class="m-4">
  <app-notas-caso
    *ngIf="selectedSection === 'notas' && caso"
    [caso]="caso!"
  ></app-notas-caso>
  <app-abogados-caso
    *ngIf="selectedSection === 'abogados' && caso"
    [caso]="caso"
  ></app-abogados-caso>
  <app-documentos-caso
    *ngIf="selectedSection === 'documentos' && caso"
    [caso]="caso"
  ></app-documentos-caso>
  <app-recordatorios-list
    *ngIf="selectedSection === 'recordatorios' && caso"
    [caso]="caso"
  ></app-recordatorios-list>
  <app-comentarios-list
    *ngIf="selectedSection === 'comentarios' && caso"
    [caso]="caso"
  ></app-comentarios-list>
</div>
